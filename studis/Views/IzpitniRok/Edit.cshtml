
@{
    ViewBag.Title = "Spreminjaje izpitnega roka";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/mvcfoolproof.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
<!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

@model studis.Models.IzpitniRokModel
<h2>Spreminjaje izpitnega roka</h2>





@using (Html.BeginForm())
{
    <div>
        <fieldset>
            <!--Izbira Predmeta-->
            <div class="editor-label">
                @Html.LabelFor(m => m.predmet)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.predmet, (SelectList)ViewBag.Predmets, "Izberi predmet")
                @Html.ValidationMessageFor(m => m.predmet)
            </div>

            <!--Izbira IzpitnegaRoka-->
            <div class="editor-label">
                @Html.LabelFor(m => m.id)
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(m => m.id, (SelectList)ViewBag.Prazen)
                @Html.ValidationMessageFor(m => m.id)
            </div>

            <!--Izbira Profesorja
            <div class="editor-label">
                Html.LabelFor(m => m.profesor)
            </div>
            <div class="editor-field">
                Html.DropDownListFor(m => m.profesor, (SelectList)ViewBag.Prazen)
                Html.ValidationMessageFor(m => m.profesor)
            </div>
            -->

            <!--Izbira datuma-->
            <script>
                $(function () {
                    $("#datum").datepicker({dateFormat: 'dd.mm.yy'});
                });
            </script>
            <div class="editor-label">
                @Html.LabelFor(m => m.datum)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.datum)
                @Html.ValidationMessageFor(m => m.datum)
            </div>

            <p>
                <input type="submit" value="Spremeni">
            </p>
        </fieldset>
    </div>
}


<script language="javascript" type="text/javascript">
    //napolni izpitne roke
    $(document).ready(function () {
        $("#predmet").change(function () {
            $.get("/IzpitniRok/GetIzpitniRoksForPredmet/" + $(this).val(), function (response) {
                var izpitniRoks = $.parseJSON(response);
                var ddlIzpitniRoks = $("#id");
                if ($("#predmet option:first-child").text() == "Izberi predmet") {
                    $("#predmet option:first-child").remove();
                }
                //pocisti
                $("#id > option").remove();

                //napolni
                if (izpitniRoks.length < 1) {
                    ddlIzpitniRoks.append('<option value="">Ni razpisanih rokov.</option>');
                }
                for (i = 0; i < izpitniRoks.length; i++) {
                    ddlIzpitniRoks.append('<option value="' + izpitniRoks[i].Value + '">' + izpitniRoks[i].Text + '</option>');
                }
            });
        });
    });
    /*
    //napolni profesorje
    $(document).ready(function () {
        $("#predmet").change(function () {
            $.get("/IzpitniRok/GetProfesorsForPredmet/" + $(this).val(), function (response) {
                var profesors = $.parseJSON(response);
                var ddlProfesors = $("#profesor");
                if ($("#predmet option:first-child").text() == "Izberi predmet") {
                    $("#predmet option:first-child").remove();
                }
                //pocisti
                $("#profesor > option").remove();

                //napolni
                if (profesors.length < 1) {
                    ddlProfesors.append('<option value="">Ni nosilcev predmeta.</option>');
                }
                for (i = 0; i < profesors.length; i++) {
                    ddlProfesors.append('<option value="' + profesors[i].Value + '">' + profesors[i].Text + '</option>');
                }
            });
        });
    });
    */

    //napolni datum
    $(document).ready(function () {
        $("#id").change(function () {
            $.get("/IzpitniRok/GetDatumForIzpitniRok/" + $(this).val(), function (response) {
                var datum = response;
                $("#datum").val(datum);
            });
        });
    });
</script>